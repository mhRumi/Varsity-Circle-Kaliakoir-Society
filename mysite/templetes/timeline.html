{% extends 'navbar.html'%}
{% load static %}
{% block content %}
<!DOCTYPE html>
<html>
<head>
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css">
    <link rel="stylesheet" href="{% static 'timeline.css' %}">
    <style>
            .container {
              position: relative;
              width: 80%;
            }
            
            .image {
              display: block;
              width: 100%;
              height: auto;
            }
            
            .overlay {
              position: absolute;
              bottom: 50%;
              left: 5%;         
              right: 0;
              background-color: rgb(10, 17, 19);
              overflow: hidden; 
              width: 90%;
              height:0;
              transition: .5s ease;
              opacity: 0.7;
            }
            
            .container:hover .overlay {
              bottom: 0;
              height: 100%;
            }
            
            .text {
              color: white;
              font-size: 20px;
              position: absolute;
              top: 50%;
              left: 50%;
              -webkit-transform: translate(-50%, -50%);
              -ms-transform: translate(-50%, -50%);
              transform: translate(-50%, -50%);
              text-align: center;
            }
            .avatar {   
                vertical-align: middle;
                width: 50px;
                height: 50px;
                border-radius: 50%;
                
              }
            </style>

</head>
<body>

<div class="row">   
  <div class="column left" style="background-color:#aaa;">
        <div class="container"  style="margin-left: 3%">
                <img src="{{user.profile.image.url}}" alt="Avatar" class="image">
                <div class="overlay">
                  <div class="text">Update</div>
                </div>
        </div>
  </div>

  <div align = "center" class="column middle" style="background-color:rgb(187, 187, 187);">
        <div class="idea"  >
            <form class="form-container" action="status" method="POST">
                        {% csrf_token %}
                <div style="height: 10%;">
                    <textarea onclick="showbutton()" oninput="resizeStatus(this)" placeholder="What's on your mind ???" name="status" required></textarea>
                </div>
                        
               
                <input type="submit" class="open-button" id="share" value="Share">
                
            </form>
        </div>

                    {% for s in status %}

                <div  class="status" onmouseover="hidebutton()">
                    <div class="row">
                        <div style="margin-left: 3%;height:8%">
                            <img class="avatar" src="{{user.profile.image.url}}" alt="Avatar">
                            <a align = "left"  href="#">{{s.name}} </a> 
                            {{s.time}}
  
                        </div>
                    </div>

                    <div style="color: rgb(9, 9, 10);width:97%;" align = "left">
                         <!--   <p > {{s.status}}</p>  -->
                         {{s.status}}
                    </div>
                    
                    <div class="rowlike" >
                        <div class="columnlike" id="like" >
                            <i onmouseout="out(this)" onmouseover="move(this, '{{s.like}}')" onclick="like(this)"  class="fa fa-thumbs-up" ></i>
                        </div> 
                          
                        <div class="columnlike"  >
                            <i class="fa fa-comment"></i>
                        </div>                       
                    </div>
                    <!-- comments section -->
                        <div> 
                          <form action="" class="comment">
                              <textarea name="" oninput="resize(this)" id="comment" placeholder="write a comment" rows="1"></textarea>
                          </form>
                        </div>

                
                </div>

                {% endfor %}
                 
  </div>

  <div align = "center" class="column right" style="background-color:#ccc">
        <button class="open-button" style="width: 100%" onclick="openForm()">Chat</button>
        <div class="chat-popup" id="myForm">
                <form action="" class="form-container">
                  <textarea  placeholder="Type message." name="msg" required></textarea>
                  <button type="submit" class="btn">Send</button>
                  <button type="button" class="btn cancel" onclick="closeForm()">Close</button>
                </form>
              </div>
    </div>
</div>



<script>

    function resize(comment){
      comment.style.height = 'auto';
      comment.style.height = (comment.scrollHeight) + "px" ;
    }
    function resizeStatus(element){
      element.style.height = 'auto';
      element.style.height = (element.scrollHeight) + "px" ;
    }  
    function move(x, s){
        x.innerHTML = s;
    }

    function out(x){
        x.innerHTML = "";
    }

    function like(x){
        x.classList.toggle("fa-thumbs-down");

    }

    function hidebutton(){
        document.getElementById("share").style.display = "none";
    }

    function showbutton(){
        document.getElementById("share").style.display = "block";
    }

    function openForm() {
        document.getElementById("myForm").style.display = "block";
        }
        
        function closeForm() {
        document.getElementById("myForm").style.display = "none";
        }
</script>

</body>
</html>
{% endblock %}